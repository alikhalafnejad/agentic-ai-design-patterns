### **فصل ۲: کالبدشکافی یک عامل هوش مصنوعی (The Anatomy of an AI Agent)**

در فصل قبل، ما ضرورت وجود الگوهای طراحی عامل‌محور را به عنوان یک رویکرد ساختاریافته برای ساخت سیستم‌های هوشمند معرفی کردیم. قبل از اینکه بتوانیم به الگوهای خاصی که این سیستم‌ها را هدایت می‌کنند بپردازیم، ضروری است که اجزای اصلی سازنده یک عامل هوش مصنوعی (AI Agent) را درک کنیم. این فصل به کالبدشکافی یک عامل مدرن می‌پردازد و هر یک از اجزای حیاتی آن را که با هم کار می‌کنند تا رفتار هوشمندانه و خودمختار را ممکن سازند، تشریح می‌کند.

تصور کنید در حال ساختن یک ربات هستید. شما به یک مغز برای فکر کردن، دست و پا برای تعامل با دنیا، حافظه برای یادآوری، و یک برنامه یا هدف برای هدایت اقداماتش نیاز دارید. به طور مشابه، یک عامل هوش مصنوعی نیز از مجموعه‌ای از اجزای اصلی تشکیل شده است:

1.  **موتور اصلی (Core Engine):** مغز عملیات، که معمولاً یک مدل زبانی بزرگ (LLM) است.
2.  **حافظه (Memory):** توانایی عامل برای به خاطر سپردن اطلاعات از تعاملات گذشته.
3.  **ابزارها (Tools):** دست‌ها و حواس عامل که به آن اجازه می‌دهد با سیستم‌های خارجی تعامل کند.
4.  **حلقه عامل (Agent Loop):** چارچوب تصمیم‌گیری که به عامل اجازه می‌دهد به صورت خودمختار عمل کند.

در این فصل، ما هر یک از این اجزا را به تفصیل بررسی خواهیم کرد و نقش آن‌ها را در عملکرد کلی یک عامل هوشمند روشن خواهیم ساخت.

#### **۱. موتور اصلی: مدل‌های زبانی بزرگ (LLMs)**

در قلب هر عامل هوش مصنوعی مدرنی، یک مدل زبانی بزرگ (Large Language Model - LLM) قرار دارد. این مدل به عنوان «مغز» یا موتور استدلال (reasoning engine) عامل عمل می‌کند. مدل‌های زبانی بزرگ مانند GPT-4، Gemini یا Llama 3 بر روی حجم عظیمی از داده‌های متنی آموزش دیده‌اند که به آن‌ها قابلیت‌های شگفت‌انگیزی در موارد زیر می‌دهد:

*   **درک زبان طبیعی (Natural Language Understanding):** تفسیر و درک درخواست‌های کاربر، حتی اگر مبهم یا پیچیده باشند.
*   **تولید زبان طبیعی (Natural Language Generation):** ایجاد پاسخ‌های منسجم، مرتبط با زمینه و شبیه به انسان.
*   **استدلال (Reasoning):** انجام استدلال مبتنی بر عقل سلیم (common-sense reasoning)، استنتاج اطلاعات و حتی حل مسائل ساده.

با این حال، یک مدل زبانی بزرگ به تنهایی یک عامل نیست. این مدل‌ها محدودیت‌های ذاتی دارند:

*   **دانش منقطع (Knowledge Cutoff):** دانش آن‌ها به داده‌هایی که بر روی آن آموزش دیده‌اند محدود است و از رویدادهای پس از تاریخ آموزش خود بی‌اطلاع هستند.
*   **عدم توانایی در انجام عمل (Inability to Act):** یک مدل زبانی بزرگ نمی‌تواند به تنهایی کاری در دنیای واقعی انجام دهد. نمی‌تواند یک ایمیل ارسال کند، در اینترنت جستجو کند یا یک پایگاه داده را پرس‌وجو کند. این مدل تنها می‌تواند متن تولید کند.

نقش مدل زبانی بزرگ در یک عامل، تفسیر اطلاعات، تصمیم‌گیری در مورد گام بعدی و تولید خروجی‌های متنی (مانند یک پاسخ به کاربر یا دستوری برای استفاده از یک ابزار) است. سایر اجزای عامل برای غلبه بر این محدودیت‌ها طراحی شده‌اند.

#### **۲. حافظه (Memory): فراهم کردن زمینه و قابلیت یادگیری**

یک مکالمه بدون حافظه، مجموعه‌ای از تبادلات نامرتبط خواهد بود. حافظه به عامل اجازه می‌دهد تا زمینه (context) را حفظ کند و تعاملات شخصی‌سازی‌شده و منسجمی را ارائه دهد. دو نوع اصلی حافظه در عامل‌ها وجود دارد:

*   **حافظه کوتاه‌مدت (Short-Term Memory):** این حافظه مربوط به زمینه مکالمه فعلی است. این حافظه به عامل اجازه می‌دهد تا پیام‌های قبلی را در یک گفتگو به خاطر بسپارد تا بتواند به سوالات بعدی پاسخ دهد یا به اطلاعاتی که قبلاً ذکر شده است، ارجاع دهد. این حافظه معمولاً با پایان یافتن مکالمه پاک می‌شود.
*   **حافظه بلندمدت (Long-Term Memory):** این حافظه به عامل اجازه می‌دهد تا اطلاعات را در طول چندین مکالمه و در بازه‌های زمانی طولانی حفظ کند. این نوع حافظه برای یادگیری ترجیحات کاربر (user preferences)، به خاطر سپردن حقایق کلیدی در مورد یک پروژه، یا ساختن یک پایگاه دانش (knowledge base) در طول زمان ضروری است. حافظه بلندمدت اغلب با استفاده از پایگاه‌های داده برداری (vector databases) پیاده‌سازی می‌شود که امکان بازیابی سریع اطلاعات مرتبط را فراهم می‌کند.

پیاده‌سازی مؤثر حافظه، یکی از بزرگترین چالش‌ها در طراحی عامل است و نقشی حیاتی در ایجاد تجربه‌ای دارد که هوشمندانه و مفید به نظر برسد.

#### **۳. ابزارها (Tools): تعامل با جهان**

اگر مدل زبانی بزرگ مغز است، ابزارها دست‌ها، پاها و حواس عامل هستند. ابزارها (Tools) توابعی هستند که به عامل اجازه می‌دهند با دنیای خارج از دانش ذاتی خود تعامل کند. آن‌ها شکاف بین توانایی‌های استدلال مبتنی بر متنِ مدل زبانی بزرگ و نیاز به دسترسی به اطلاعات زنده و انجام اقدامات را پر می‌کنند.

نمونه‌هایی از ابزارها عبارتند از:

*   **جستجوی وب (Web Search):** برای دریافت اطلاعات به‌روز.
*   **فراخوانی‌های API (API Calls):** برای تعامل با سرویس‌های دیگر (مانند بررسی آب و هوا، رزرو بلیط یا ارسال پیام در Slack).
*   **پرس‌وجوی پایگاه داده (Database Queries):** برای بازیابی داده‌های ساختاریافته از یک پایگاه داده.
*   **اجرای کد (Code Execution):** برای انجام محاسبات یا اجرای اسکریپت‌ها.

مدل زبانی بزرگ (LLM) خود ابزار را اجرا نمی‌کند. در عوض، تصمیم می‌گیرد که *کدام* ابزار را با *چه* ورودی‌هایی (arguments) فراخوانی کند. سپس یک لایه کدنویسی (code layer) این تصمیم را گرفته، ابزار مربوطه را اجرا کرده و نتیجه را برای پردازش بیشتر به مدل زبانی بزرگ باز می‌گرداند. این قابلیت، که اغلب «فراخوانی تابع» (Function Calling) یا «استفاده از ابزار» (Tool Use) نامیده می‌شود، برای ساخت عامل‌های واقعاً کاربردی، اساسی است.

#### **۴. حلقه عامل (Agent Loop): برنامه‌ریزی و اجرا**

قلب تپنده خودمختاری یک عامل، **حلقه عامل (Agent Loop)** آن است. این یک فرآیند تکرارشونده است که به عامل اجازه می‌دهد به طور مداوم مشاهده کند، فکر کند و عمل کند تا به یک هدف برسد. یک حلقه عامل معمولی به این صورت عمل می‌کند:

1.  **مشاهده (Observe):** عامل ورودی جدیدی دریافت می‌کند. این ورودی می‌تواند یک درخواست از کاربر یا نتیجه حاصل از اجرای یک ابزار باشد.
2.  **تفکر (Think):** مدل زبانی بزرگ (LLM) ورودی را به همراه حافظه فعلی خود پردازش می‌کند. سپس تصمیم می‌گیرد که چه کاری باید انجام دهد. آیا باید مستقیماً به کاربر پاسخ دهد؟ آیا نیاز به استفاده از یک ابزار برای جمع‌آوری اطلاعات بیشتر دارد؟ آیا وظیفه به پایان رسیده است؟ این مرحله استدلال (reasoning step) است.
3.  **عمل (Act):** بر اساس تصمیم گرفته شده در مرحله تفکر، عامل یک اقدام انجام می‌دهد. این اقدام می‌تواند تولید یک پاسخ برای کاربر، فراخوانی یک ابزار با پارامترهای مشخص، یا پایان دادن به کار باشد.

نتیجه این اقدام سپس به عنوان یک مشاهده جدید به حلقه بازگردانده می‌شود و این چرخه تا زمانی که هدف نهایی کاربر برآورده شود، ادامه می‌یابد. چارچوب‌هایی مانند ReAct (Reason + Act) این حلقه را به صورت رسمی تعریف می‌کنند و به مدل‌های زبانی بزرگ اجازه می‌دهند تا افکار خود را بیان کنند ("من باید از ابزار جستجو برای یافتن پایتخت فرانسه استفاده کنم") قبل از انجام عمل (فراخوانی ابزار جستجو با ورودی "پایتخت فرانسه").

با درک این چهار جزء—مغز (LLM)، حافظه، ابزارها و حلقه تصمیم‌گیری—شما اکنون پایه‌ای محکم برای درک الگوهای طراحی که در فصل‌های بعدی ارائه می‌شوند، در اختیار دارید. این الگوها دستورالعمل‌هایی برای ترکیب هوشمندانه این اجزا به منظور حل مشکلات پیچیده و ساخت عامل‌های هوشمند، قوی و کارآمد هستند.